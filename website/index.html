<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- CSS Metro -->
    <link href="css/metro.css" rel="stylesheet">
    <link href="css/metro-icons.css" rel="stylesheet">
    <link href="css/metro-responsive.css" rel="stylesheet">
    
    <!-- Meu CSS -->
    <link href="css/position.css" rel="stylesheet">
    
    <!-- Scripts -->
    <script src="scripts/jquery.js"></script>
    <script src="scripts/metro.js"></script>
    <script src="scripts/jquery.dataTables.min.js"></script>
    
    <script>

    $(function() {

    $.getJSON('devices.json', function(data) {
       $.each(data.aparelhos, function(i, f) {
          var checkboxLigado = " <label class=\"switch-original\"><a href='ativarOff.php?nome_aparelho=" + f.nome +"'><input type=\"checkbox\" checked><span class=\"check\"></span></a></label>";
          var checkboxDesligado = " <label class=\"switch-original\"><a href='ativarOn.php?nome_aparelho=" + f.nome +"'><input type=\"checkbox\"><span class=\"check\"></span></a></label>";
          var checkboxUsado = "";
           
          var botaoAtualizarCadastro = "<button class=\"button warning\"><a href='atualizar.html?nome_antigo=" + f.nome + "'><span class=\"mif-loop2\"></span> Atualizar Cadastro</a></button> ";
        
          var botaoRemoverAparelho = "<button class=\"button alert\"><a href='remover.php?nome_aparelho=" + f.nome + "'><span class=\"mif-minus\"></span> Remover Aparelho</a></button>";
        
          // Verifica se aparelho esta ligado
          if (f.estado == 0){
              checkboxUsado = checkboxDesligado;
          } else{
              checkboxUsado = checkboxLigado;
          }
           
          var tblRow = "<tr>" + 
              "<td>" + f.nome + "</td>" 
            + "<td>" + f.kwh + "</td>" 
            + "<td> R$: " + f.custo + "</td>" 
            + "<td>" + checkboxUsado + "</td>" 
            + "<td>" + botaoAtualizarCadastro + botaoRemoverAparelho + "</td>" 
                    + "</tr>"
           $(tblRow).appendTo("#tabelaAparelhos tbody");
     });

   });

});
</script>
    
    <style>
        a:visited{
            color: white;
        }
    </style>
    
</head>
<body class="bg-lightBlue">
    
    <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/pt_BR/sdk.js#xfbml=1&version=v2.7";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
    
    <!-- Barra superior com nome da organizacao-->
    <div class="app-bar fixed-top darcula" data-role="appbar">
        <a class="app-bar-element branding"><img id="housekeepingLogo" src="img/houseKeepingLogo.png">Smart Homes Housekeeping</a>
        <span class="app-bar-divider"></span>

        <div class="app-bar-element place-right">
            <span class="dropdown-toggle"><span class="mif-user"></span> Administrador</span>
            <div class="app-bar-drop-container padding10 place-right no-margin-top block-shadow fg-dark" data-role="dropdown" data-no-close="true" style="width: 220px">
                <h2 class="text-light">Configuracoes</h2>
                <ul class="unstyled-list fg-dark">
                    <li><a href="" class="fg-white3 fg-hover-yellow">Sair</a></li>
                </ul>
            </div>
        </div>
    </div>
    
    <!-- Barra lateral e restante da pagina -->
    <div class="page-content">
        <div class="flex-grid no-responsive-future" style="height: 100%;">
            <div class="row" style="height: 100%">
                <div class="cell size-x200" id="cell-sidebar" style="background-color: #71b1d1; height: 100%">
                    
                    <!-- Barra Lateral -->
                    
                    <ul class="sidebar">
                        <li class="active"><a>
                            <span class="mif-feed icon"></span>
                            <span class="title">Aparelhos Conectados</span>
                        </a></li>
                        <li class="disabled"><a href="cadastro.html">
                            <span class="mif-plus icon"></span>
                            <span class="title">Cadastrar Aparelho</span>
                        </a></li>
                        <li class="disabled"><a>
                            <span class="mif-loop2 icon"></span>
                            <span class="title">Atualizar Cadastro</span>
                        </a></li>
                        <li class="disabled"><a href="historico.html">
                            <span class="mif-calendar icon"></span>
                            <span class="title">Historico de Consumo</span>
                        </a></li>
                        <li class="disabled"><a href="ranking.html">
                            <span class="mif-facebook icon"></span>
                            <span class="title">Ranking de Consumo</span>
                        </a></li>
                    </ul>
                </div>
                <div class="cell auto-size padding20 bg-white" id="cell-content">
                    <h1 class="text-light">Aparelhos Conectados <span class="mif-feed icon place-right"></span></h1>
                    <!-- Botao de Cadastrar Aparelho -->
                    <hr class="thin bg-grayLighter">
                    <button class="button primary" onclick="location.href='cadastro.html'"><span class="mif-plus"></span> Cadastrar Aparelho</button>
                    <hr class="thin bg-grayLighter">
                    
                    <table id="tabelaAparelhos" class="dataTable border bordered" data-role="datatable" data-auto-width="false">
                        <thead>
                        <tr>
                            <td class="sortable-column sort-asc" style="width: 100px">Aparelho</td>
                            <td>Kw/h</td>
                            <td>Custo</td>
                            <td>Ligar/Desligar</td>
                            <td>Gerenciar</td>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    
</body>
    
<script>
    
</script>

</html>
